{"version":3,"sources":["useCompatNavigation.tsx"],"names":["React","useNavigation","useRoute","useNavigationState","createCompatNavigationProp","useCompatNavigation","navigation","route","isFirstRouteInParent","state","routes","key","context","useRef","useMemo","current"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SACEC,aADF,EAEEC,QAFF,EAKEC,kBALF,QAMO,0BANP;AAOA,OAAOC,0BAAP,MAAuC,8BAAvC;AAGA,eAAe,SAASC,mBAAT,GAEX;AACF,QAAMC,UAAU,GAAGL,aAAa,EAAhC;AACA,QAAMM,KAAK,GAAGL,QAAQ,EAAtB;AAEA,QAAMM,oBAAoB,GAAGL,kBAAkB,CAC5CM,KAAD,IAAWA,KAAK,CAACC,MAAN,CAAa,CAAb,EAAgBC,GAAhB,KAAwBJ,KAAK,CAACI,GADI,CAA/C;AAIA,QAAMC,OAAO,GAAGZ,KAAK,CAACa,MAAN,CAAkC,EAAlC,CAAhB;AAEA,SAAOb,KAAK,CAACc,OAAN,CACL,MACEV,0BAA0B,CACxBE,UADwB,EAExBC,KAFwB,EAGxBK,OAAO,CAACG,OAHgB,EAIxBP,oBAJwB,CAFvB,EAQL,CAACA,oBAAD,EAAuBF,UAAvB,EAAmCC,KAAnC,CARK,CAAP;AAUD","sourcesContent":["import * as React from 'react';\nimport {\n  useNavigation,\n  useRoute,\n  NavigationProp,\n  ParamListBase,\n  useNavigationState,\n} from '@react-navigation/native';\nimport createCompatNavigationProp from './createCompatNavigationProp';\nimport { CompatNavigationProp } from './types';\n\nexport default function useCompatNavigation<\n  T extends NavigationProp<ParamListBase>\n>() {\n  const navigation = useNavigation();\n  const route = useRoute();\n\n  const isFirstRouteInParent = useNavigationState(\n    (state) => state.routes[0].key === route.key\n  );\n\n  const context = React.useRef<Record<string, any>>({});\n\n  return React.useMemo(\n    () =>\n      createCompatNavigationProp(\n        navigation,\n        route as any,\n        context.current,\n        isFirstRouteInParent\n      ) as CompatNavigationProp<T>,\n    [isFirstRouteInParent, navigation, route]\n  );\n}\n"]}